# Schedule Ninja

> Chrome의 온디바이스 AI로 웹에서 발견한 일정 단서를 Google Calendar 이벤트로 바꿔주는 확장 프로그램

[English](README.md)

## 개요
Schedule Ninja는 페이지를 이동하지 않고도 회의, 마감, 예매 완료 정보를 포착하도록 설계되었습니다. 텍스트를 하이라이트하거나 컨텍스트 메뉴를 호출하면 주변 맥락을 분석해 구조화된 이벤트를 제안하고, 확인 전 모든 필드를 손쉽게 조정할 수 있습니다. 일부 확인 페이지는 자동으로 감지해 부드러운 알림과 함께 이벤트 초안을 제공합니다.

## 주요 기능
- **온디바이스 파싱**: Chrome `LanguageModel`(Gemini Nano) API와 캐시를 활용해 선택한 텍스트에서 하나 이상의 이벤트를 추출하며, 데이터는 로컬에서 처리됩니다.
- **인라인 이벤트 빌더**: 여러 제안 카드와 상세 편집 폼, 시간대 보정, Google Calendar 저장을 한 모달 안에서 제공합니다.
- **예매 페이지 자동 감지**: 결제·예매 완료 패턴을 탐지해 토스트 알림으로 알려주고 필요한 정보를 미리 추출합니다.
- **출처 정보 보강**: 현재 페이지 URL과 맥락을 이벤트 설명에 첨부할지 설정으로 제어할 수 있습니다.
- **유연한 UI**: 영어·한국어 로케일, 다크 모드, 시간대 설정을 `chrome.storage.sync`에 저장해 일관된 경험을 제공합니다.

## 사용 흐름
1. 일정 정보가 포함된 문장이나 블록을 하이라이트합니다.
2. 우클릭 후 `Create Calendar Event`를 클릭하거나, 지원되는 예매 완료 페이지에서는 자동 감지를 활용합니다.
3. 선택한 텍스트가 백그라운드 서비스 워커로 전달되고 온디바이스 LanguageModel이 파싱을 수행합니다.
4. 모달에서 제안된 이벤트를 검토하고 날짜·시간·메모를 수정한 뒤 Google Calendar에 저장합니다.
5. 팝업 설정 화면에서 로그인, 언어, 시간대, 기능 토글을 관리합니다.

## 구성 요소
| 경로 | 설명 |
| --- | --- |
| `manifest.json` | MV3 권한, OAuth 범위, 엔트리 포인트 정의 |
| `background.js` | AI 세션 관리, 응답 캐시, Google Calendar 요청, 메시지 라우팅 담당 |
| `content.js` | Schedule Ninja 모달 렌더링, 제안 편집, 예매 페이지 자동 감지 수행 |
| `popup.html` / `popup.js` | 로그인, 로케일, 테마, 자동 감지 설정 UI 제공 |
| `_locales/` | 영어·한국어 메시지 카탈로그 |
| `css/modal.css` | 인라인 이벤트 빌더 스타일 정의 |
| `assets/`, `icons/` | 모달과 확장 UI에서 사용하는 브랜드 리소스 |
| `secrets.js` | `chrome.identity`용 Google OAuth 클라이언트 ID 저장 |
| `archive/` | 디자인 가이드, 릴리스 체크리스트 등 참고 문서 아카이브 |

## 설정 안내
1. **브라우저 요구 사항**: 온디바이스 모델을 지원하는 Chrome 138+ 버전(또는 `chrome://flags/#optimization-guide-on-device-model` 활성화)이 필요합니다.
2. **OAuth 클라이언트 확인**: `secrets.js`의 `GOOGLE_CLIENT_ID` 값을 점검하고, 별도 Google Cloud 프로젝트를 사용한다면 업데이트합니다.
3. **확장 프로그램 로드**: `chrome://extensions`에서 *개발자 모드*를 켠 뒤 *압축해제된 확장 프로그램을 로드*하고 저장소 루트를 선택합니다.
4. **캘린더 권한 부여**: 팝업을 열어 Google 계정으로 로그인하면, 이벤트 저장 시 `chrome.identity`를 통해 토큰이 발급됩니다.

## 개발 메모
- `LanguageModelManager`는 Chrome AI 세션을 생성·재사용하고 다운로드 진행률을 `ProgressUpdater`로 모달에 전달합니다.
- `ResponseCache`는 동일 텍스트 요청을 재사용하고, 캐시된 응답에 현재 시간대 설정을 다시 적용합니다.
- 설정 정보는 `chrome.storage.sync`에 저장되며 모달과 팝업 모두에서 동일하게 반영됩니다.
- 예매 감지기는 현재 한국어 티켓팅 패턴에 최적화되어 있으며, 추가 로케일을 지원하려면 `content.js`의 정규식을 확장하세요.
- `secrets.example.js`는 외부 API를 사용하던 이전 빌드를 위한 호환 파일이며, 현재 버전은 온디바이스 모델만 사용합니다.

## 로드맵
- 한국어 중심 예매 감지 로직을 다국어·다양한 예약 플랫폼으로 확장합니다.
- 최근 저장한 이벤트를 다시 살펴볼 수 있는 경량 로그를 모달에 노출합니다.
- 시간대 보정과 AI 응답 검증 로직을 대상으로 테스트 커버리지를 마련합니다.

## 기여하기
버그 신고, 자동 감지 오탐 제보, 프롬프트·UI 개선 아이디어를 Issues 탭에 남겨주세요. 디자이너, 프롬프트 엔지니어, 생산성 애호가 모두 Schedule Ninja의 다음 버전을 함께 만들어갈 수 있습니다.
